<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{VERSION}} - 发布详情</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
          "Oxygen", "Ubuntu", "Cantarell", sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .commit-item {
        transition: all 0.2s ease;
      }
      .commit-item:hover {
        background-color: #f8fafc;
      }
      .tech-badge {
        background: linear-gradient(45deg, #ec4899, #be185d);
      }
      .download-badge {
        background: linear-gradient(45deg, #10b981, #059669);
      }
      pre {
        background: #1e293b;
        color: #e2e8f0;
        border-radius: 8px;
        overflow-x: auto;
      }
      .highlight {
        background-color: #fef3cd;
        padding: 2px 4px;
        border-radius: 3px;
      }
      .copy-button {
        transition: all 0.2s ease;
      }
      .copy-button:hover {
        background-color: #374151;
      }

      /* Branch Navigation Styles */
      .branch-nav {
        display: flex;
        border-bottom: 2px solid #e5e7eb;
        margin-bottom: 1.5rem;
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .branch-nav::-webkit-scrollbar {
        display: none;
      }

      .branch-tab {
        position: relative;
        padding: 0.75rem 1.5rem;
        margin-right: 0.5rem;
        border-radius: 0.5rem 0.5rem 0 0;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
        min-width: fit-content;
        background: transparent;
        border: none;
        font-size: 0.875rem;
        font-weight: 500;
        color: #6b7280;
      }

      .branch-tab:hover {
        background-color: #f3f4f6;
        color: #374151;
      }

      .branch-tab.active {
        background-color: #3b82f6;
        color: white;
        font-weight: 600;
      }

      .branch-tab.active::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 2px;
        background-color: #3b82f6;
      }

      /* Content area animations */
      .content-transition {
        transition: all 0.3s ease;
        animation: fadeInUp 0.4s ease-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-enter {
        opacity: 0;
        transform: translateY(10px);
      }

      .fade-enter-active {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // 从模板变量中获取数据
      const releaseData = {
        version: "{{VERSION}}",
        createdAt: "{{CREATED_AT}}",
        commitHash: "{{COMMIT_HASH}}",
        privateBranch: "{{PRIVATE_BRANCH}}",
        triggerEvent: "{{TRIGGER_EVENT}}",
        triggerRepo: "{{TRIGGER_REPO}}",
        triggerBranch: "{{TRIGGER_BRANCH}}",
        triggerCommit: "{{TRIGGER_COMMIT}}",
        triggerAuthor: "{{TRIGGER_AUTHOR}}",
        commitMessage: "{{COMMIT_MESSAGE}}",
        changelog: `{{CHANGELOG}}`,
        githubBaseUrl: "{{GITHUB_BASE_URL}}",
        repoPath: "{{REPO_PATH}}",
        releaseHash: "{{RELEASE_HASH}}",
        releaseHashShort: "{{RELEASE_HASH_SHORT}}",
        downloadFiles: [], // 将通过API动态获取
      };

      function App() {
        const [activeTab, setActiveTab] = useState("overview");
        const [activeBranch, setActiveBranch] = useState(null);
        const [copied, setCopied] = useState(false);
        const [branches, setBranches] = useState([]);
        const [branchData, setBranchData] = useState({});
        // 添加下载文件状态
        const [downloadFiles, setDownloadFiles] = useState([]);
        const [loadingAssets, setLoadingAssets] = useState(true);
        const [assetsError, setAssetsError] = useState(null);

        const formatDate = (dateString) => {
          const date = new Date(dateString);
          return date.toLocaleString("zh-CN", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit",
          });
        };

        const copyToClipboard = (text) => {
          navigator.clipboard.writeText(text).then(() => {
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          });
        };

        // 改进的changelog解析函数
        const parseChangelog = (changelog) => {
          const branchData = {};
          const lines = changelog.split("\n");
          let currentBranch = null;
          let currentCommits = [];

          lines.forEach((line) => {
            // 匹配分支标题，例如：#### 📋 `dev` 分支最新提交
            const branchMatch = line.match(/####.*`([^`]+)`.*分支最新提交/);
            if (branchMatch) {
              // 保存之前的分支数据
              if (currentBranch && currentCommits.length > 0) {
                branchData[currentBranch] = currentCommits;
              }
              currentBranch = branchMatch[1];
              currentCommits = [];
            }
            // 匹配提交项，以 "  - " 开头
            else if (line.trim().match(/^-\s+/) && currentBranch) {
              const commitText = line.replace(/^\s*-\s*/, "").trim();
              if (commitText) {
                currentCommits.push(commitText);
              }
            }
          });

          // 保存最后一个分支的数据
          if (currentBranch && currentCommits.length > 0) {
            branchData[currentBranch] = currentCommits;
          }

          console.log("Parsed branch data:", branchData);
          return branchData;
        };

        // 渲染单个提交项
        const renderCommit = (commitText, index) => {
          // 解析提交格式：提交消息 (链接)
          const linkMatch = commitText.match(
            /(.*?)\s*\(<a[^>]*href="([^"]*)"[^>]*>([^<]*)<\/a>\)/
          );

          if (linkMatch) {
            const [, message, url, hash] = linkMatch;
            return (
              <div
                key={index}
                className="commit-item p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all"
              >
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <p className="text-gray-800 font-medium mb-1">
                      {message.trim()}
                    </p>
                    <div className="flex items-center space-x-2">
                      <span className="inline-flex items-center px-2 py-1 rounded text-xs font-mono bg-gray-100 text-gray-600">
                        <i className="fas fa-code-commit mr-1"></i>
                        {hash}
                      </span>
                      <a
                        href={url}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="inline-flex items-center text-blue-600 hover:text-blue-800 text-xs"
                      >
                        <i className="fas fa-external-link-alt mr-1"></i>
                        查看提交
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // 如果没有匹配到链接格式，直接显示原文
          return (
            <div
              key={index}
              className="commit-item p-3 rounded-lg border border-gray-200"
            >
              <p
                className="text-gray-800"
                dangerouslySetInnerHTML={{ __html: commitText }}
              />
            </div>
          );
        };

        // 初始化分支数据和 Embla Carousel
        useEffect(() => {
          const parsedBranchData = parseChangelog(releaseData.changelog);
          const branchList = Object.keys(parsedBranchData);

          setBranchData(parsedBranchData);
          setBranches(branchList);

          if (branchList.length > 0 && !activeBranch) {
            setActiveBranch(branchList[0]);
          }
        }, []);

        // 动态获取release assets
        const fetchReleaseAssets = async () => {
          setLoadingAssets(true);
          setAssetsError(null);

          const apiBase = `https://api.github.com/repos/${releaseData.triggerRepo}`;

          try {
            console.log("🔍 Fetching release assets...");
            console.log("Repository:", releaseData.triggerRepo);
            console.log("Tag Name:", releaseData.version);
            console.log("Release Hash:", releaseData.releaseHash);

            // 直接通过tag名称获取release（最可靠的方法）
            console.log(`📦 Fetching release by tag: ${releaseData.version}`);
            const versionResponse = await fetch(
              `${apiBase}/releases/tags/${releaseData.version}`
            );

            if (versionResponse.ok) {
              const releaseInfo = await versionResponse.json();
              console.log("✅ Found release by tag:", releaseData.version);
              console.log(
                "🎯 Release target commit:",
                releaseInfo.target_commitish
              );

              if (releaseInfo.assets && releaseInfo.assets.length > 0) {
                const assets = releaseInfo.assets.map((asset) => ({
                  name: asset.name,
                  size: asset.size,
                  browser_download_url: asset.browser_download_url,
                  download_count: asset.download_count,
                  content_type: asset.content_type,
                  updated_at: asset.updated_at,
                }));

                setDownloadFiles(assets);
                console.log(
                  `✅ Successfully loaded ${assets.length} assets:`,
                  assets.map((a) => a.name)
                );
              } else {
                console.log("⚠️ Release found but no assets available");
                setDownloadFiles([]);
              }
            } else {
              console.log("❌ Release not found by tag:", releaseData.version);

              // Fallback: 搜索所有releases找匹配的commit
              console.log("� Searching all releases for matching commit...");
              const allReleasesResponse = await fetch(
                `${apiBase}/releases?per_page=50`
              );

              if (allReleasesResponse.ok) {
                const allReleases = await allReleasesResponse.json();
                console.log(`� Found ${allReleases.length} total releases`);

                const matchingRelease = allReleases.find(
                  (release) =>
                    release.target_commitish === releaseData.releaseHash ||
                    release.target_commitish === releaseData.releaseHashShort ||
                    release.target_commitish?.startsWith(
                      releaseData.releaseHashShort
                    )
                );

                if (matchingRelease && matchingRelease.assets?.length > 0) {
                  const assets = matchingRelease.assets.map((asset) => ({
                    name: asset.name,
                    size: asset.size,
                    browser_download_url: asset.browser_download_url,
                    download_count: asset.download_count,
                    content_type: asset.content_type,
                    updated_at: asset.updated_at,
                  }));

                  setDownloadFiles(assets);
                  console.log(
                    `🎯 Found matching release by commit: ${matchingRelease.tag_name}`,
                    assets.map((a) => a.name)
                  );
                } else {
                  console.log("❌ No matching release found by commit");
                  setDownloadFiles([]);
                }
              } else {
                throw new Error(
                  `HTTP ${allReleasesResponse.status}: ${allReleasesResponse.statusText}`
                );
              }
            }
          } catch (error) {
            console.error("❌ Error fetching release assets:", error);
            setAssetsError(`获取构建产物失败: ${error.message}`);
            setDownloadFiles([]);
          } finally {
            setLoadingAssets(false);
          }
        };

        // 在组件挂载时获取assets
        useEffect(() => {
          fetchReleaseAssets();
        }, []);

        // 当点击分支导航时切换分支
        const handleBranchClick = (branchName) => {
          setActiveBranch(branchName);
        };

        return (
          <div className="min-h-screen">
            {/* Header */}
            <header className="gradient-bg text-white py-12">
              <div className="container mx-auto px-6">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="flex items-center mb-4">
                      <a
                        href="../"
                        className="text-white hover:text-gray-200 mr-4"
                      >
                        <i className="fas fa-arrow-left text-xl"></i>
                      </a>
                      <h1 className="text-4xl font-bold">
                        版本 {releaseData.version}
                      </h1>
                    </div>
                    <div className="flex flex-wrap gap-4 text-sm opacity-90">
                      <span className="flex items-center">
                        <i className="fas fa-calendar-alt mr-2"></i>
                        {formatDate(releaseData.createdAt)}
                      </span>
                      <span className="flex items-center">
                        <i className="fas fa-code-commit mr-2"></i>
                        <code className="bg-white bg-opacity-20 px-2 py-1 rounded">
                          {releaseData.commitHash.substring(0, 7)}
                        </code>
                      </span>
                      <span className="flex items-center">
                        <i className="fas fa-code-branch mr-2"></i>
                        {releaseData.privateBranch}
                      </span>
                    </div>
                  </div>
                  <div className="hidden md:block">
                    <div className="text-right">
                      <div className="text-2xl mb-2">🎉</div>
                      <div className="text-sm opacity-90">发布成功</div>
                    </div>
                  </div>
                </div>
              </div>
            </header>

            {/* Navigation Tabs */}
            <div className="bg-white border-b border-gray-200 sticky top-0 z-10">
              <div className="container mx-auto px-6">
                <div className="flex space-x-8">
                  {[
                    {
                      id: "overview",
                      label: "概览",
                      icon: "fas fa-chart-line",
                    },
                    {
                      id: "commits",
                      label: "提交记录",
                      icon: "fas fa-code-commit",
                    },
                    { id: "download", label: "下载", icon: "fas fa-download" },
                    { id: "tech", label: "技术栈", icon: "fas fa-cogs" },
                  ].map((tab) => (
                    <button
                      key={tab.id}
                      onClick={() => setActiveTab(tab.id)}
                      className={`py-4 px-2 border-b-2 font-medium text-sm flex items-center transition-colors ${
                        activeTab === tab.id
                          ? "border-blue-500 text-blue-600"
                          : "border-transparent text-gray-500 hover:text-gray-700"
                      }`}
                    >
                      <i className={`${tab.icon} mr-2`}></i>
                      {tab.label}
                    </button>
                  ))}
                </div>
              </div>
            </div>

            {/* Main Content */}
            <main className="container mx-auto px-6 py-8">
              {activeTab === "overview" && (
                <div className="space-y-8">
                  {/* Build Information */}
                  <div className="bg-white rounded-xl shadow-lg p-8 card-hover">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                      <i className="fas fa-info-circle mr-3 text-blue-500"></i>
                      构建信息
                    </h2>
                    <div className="grid md:grid-cols-2 gap-6">
                      <div className="space-y-4">
                        <div>
                          <label className="font-medium text-gray-700">
                            发布版本
                          </label>
                          <p className="text-gray-600 mt-1">
                            {releaseData.version}
                          </p>
                        </div>
                        <div>
                          <label className="font-medium text-gray-700">
                            发布时间
                          </label>
                          <p className="text-gray-600 mt-1">
                            {formatDate(releaseData.createdAt)}
                          </p>
                        </div>
                        <div>
                          <label className="font-medium text-gray-700">
                            私有仓库提交
                          </label>
                          <div className="flex items-center mt-1">
                            <code className="bg-gray-100 px-3 py-1 rounded mr-2">
                              {releaseData.commitHash}
                            </code>
                            <button
                              onClick={() =>
                                copyToClipboard(releaseData.commitHash)
                              }
                              className="copy-button p-1 rounded hover:bg-gray-100"
                              title="复制提交哈希"
                            >
                              <i
                                className={`fas ${
                                  copied
                                    ? "fa-check text-green-500"
                                    : "fa-copy text-gray-500"
                                }`}
                              ></i>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div className="space-y-4">
                        <div>
                          <label className="font-medium text-gray-700">
                            触发事件
                          </label>
                          <p className="text-gray-600 mt-1">
                            {releaseData.triggerEvent}
                          </p>
                        </div>
                        <div>
                          <label className="font-medium text-gray-700">
                            触发仓库
                          </label>
                          <p className="text-gray-600 mt-1">
                            {releaseData.triggerRepo}
                          </p>
                        </div>
                        <div>
                          <label className="font-medium text-gray-700">
                            触发分支
                          </label>
                          <p className="text-gray-600 mt-1">
                            {releaseData.triggerBranch}
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Commit Message */}
                  {releaseData.commitMessage &&
                    releaseData.commitMessage !== "{{COMMIT_MESSAGE}}" && (
                      <div className="bg-white rounded-xl shadow-lg p-8 card-hover">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                          <i className="fas fa-comment-alt mr-3 text-green-500"></i>
                          提交消息
                        </h2>
                        <div className="bg-gray-50 rounded-lg p-4">
                          <p className="text-gray-700 leading-relaxed">
                            {releaseData.commitMessage}
                          </p>
                        </div>
                      </div>
                    )}
                </div>
              )}

              {activeTab === "commits" && (
                <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                  <div className="p-8 pb-4">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                      <i className="fas fa-code-commit mr-3 text-purple-500"></i>
                      提交记录
                    </h2>

                    {branches.length === 0 ? (
                      <div className="text-center py-8 text-gray-500">
                        <i className="fas fa-code-branch text-4xl mb-4 opacity-50"></i>
                        <p>暂无提交记录</p>
                      </div>
                    ) : (
                      <div>
                        {/* 分支导航 */}
                        <div className="branch-nav">
                          {branches.map((branchName, index) => (
                            <button
                              key={branchName}
                              onClick={() => handleBranchClick(branchName)}
                              className={`branch-tab ${
                                activeBranch === branchName ? "active" : ""
                              }`}
                            >
                              <i className="fas fa-code-branch mr-2"></i>
                              {branchName}
                              <span className="ml-2 text-xs bg-white bg-opacity-20 px-2 py-1 rounded-full">
                                {branchData[branchName]?.length || 0}
                              </span>
                            </button>
                          ))}
                        </div>

                        {/* 分支内容展示 */}
                        {activeBranch && branchData[activeBranch] && (
                          <div className="content-transition p-6">
                            <div className="space-y-3">
                              {branchData[activeBranch].map((commit, index) =>
                                renderCommit(commit, index)
                              )}
                            </div>

                            {/* 分支统计信息 */}
                            <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                              <div className="flex items-center justify-between text-sm text-gray-600">
                                <span className="flex items-center">
                                  <i className="fas fa-code-branch mr-2"></i>
                                  {activeBranch} 分支
                                </span>
                                <span className="flex items-center">
                                  <i className="fas fa-list-ol mr-2"></i>共{" "}
                                  {branchData[activeBranch]?.length || 0} 个提交
                                </span>
                              </div>
                            </div>
                          </div>
                        )}
                      </div>
                    )}
                  </div>
                </div>
              )}

              {activeTab === "download" && (
                <div className="space-y-8">
                  {/* Download Files */}
                  <div className="bg-white rounded-xl shadow-lg p-8 card-hover">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                      <i className="fas fa-download mr-3 text-green-500"></i>
                      构建产物下载
                    </h2>

                    {/* Download Files List */}
                    {loadingAssets ? (
                      <div className="flex items-center justify-center py-8">
                        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"></div>
                        <span className="ml-3 text-gray-600">
                          正在加载构建产物...
                        </span>
                      </div>
                    ) : assetsError ? (
                      <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
                        <div className="flex items-center">
                          <i className="fas fa-exclamation-triangle text-red-500 mr-3"></i>
                          <span className="text-red-700">{assetsError}</span>
                        </div>
                        <button
                          onClick={fetchReleaseAssets}
                          className="mt-3 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors"
                        >
                          <i className="fas fa-sync-alt mr-2"></i>
                          重试加载
                        </button>
                      </div>
                    ) : downloadFiles && downloadFiles.length > 0 ? (
                      <div className="grid gap-4 mb-8">
                        {downloadFiles.map((file, index) => {
                          const isPlatformFile =
                            file.name.includes("darwin") ||
                            file.name.includes("linux");
                          const platform = file.name.includes("darwin")
                            ? "macOS"
                            : file.name.includes("linux")
                            ? "Linux"
                            : "Other";
                          const platformIcon = file.name.includes("darwin")
                            ? "fab fa-apple"
                            : file.name.includes("linux")
                            ? "fab fa-linux"
                            : "fas fa-file";

                          return (
                            <div
                              key={index}
                              className="bg-gray-50 rounded-lg p-6 border border-gray-200 hover:border-green-300 transition-colors"
                            >
                              <div className="flex items-center justify-between">
                                <div className="flex items-center flex-1">
                                  <div className="mr-4">
                                    <i
                                      className={`${platformIcon} text-2xl ${
                                        file.name.includes("darwin")
                                          ? "text-gray-600"
                                          : file.name.includes("linux")
                                          ? "text-blue-600"
                                          : "text-gray-500"
                                      }`}
                                    ></i>
                                  </div>
                                  <div className="flex-1">
                                    <h3 className="font-semibold text-gray-800 mb-1">
                                      {file.name}
                                    </h3>
                                    <div className="flex items-center space-x-4 text-sm text-gray-600">
                                      {isPlatformFile && (
                                        <span className="flex items-center">
                                          <i className="fas fa-desktop mr-1"></i>
                                          {platform}
                                        </span>
                                      )}
                                      <span className="flex items-center">
                                        <i className="fas fa-file-archive mr-1"></i>
                                        {(file.size / 1024 / 1024).toFixed(1)}{" "}
                                        MB
                                      </span>
                                      <span className="flex items-center">
                                        <i className="fas fa-clock mr-1"></i>
                                        {new Date(
                                          file.updated_at
                                        ).toLocaleDateString("zh-CN")}
                                      </span>
                                    </div>
                                  </div>
                                </div>
                                <a
                                  href={file.browser_download_url}
                                  download
                                  className="download-badge text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all flex items-center font-medium"
                                >
                                  <i className="fas fa-download mr-2"></i>
                                  下载
                                </a>
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    ) : (
                      <div className="text-center py-12 text-gray-500">
                        <i className="fas fa-inbox text-4xl mb-4"></i>
                        <p>暂无可下载的构建产物</p>
                      </div>
                    )}

                    {/* Download Instructions */}
                    <div className="border-t border-gray-200 pt-8">
                      <h3 className="text-xl font-bold text-gray-800 mb-6">
                        使用说明
                      </h3>

                      <div className="grid md:grid-cols-2 gap-8">
                        {/* macOS */}
                        <div className="bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-6">
                          <h4 className="font-bold text-lg mb-4 flex items-center">
                            <i className="fab fa-apple mr-2 text-gray-600"></i>
                            macOS
                          </h4>
                          <div className="space-y-3 text-sm">
                            <p>
                              1. 下载{" "}
                              <code className="bg-white px-2 py-1 rounded">
                                app-*-darwin-x64.7z
                              </code>
                            </p>
                            <p>2. 解压后添加执行权限:</p>
                            <pre className="p-3 text-xs">
                              <code>
                                chmod +x app-*-darwin-x64 && ./app-*-darwin-x64
                              </code>
                            </pre>
                            <p className="text-amber-600">
                              <i className="fas fa-exclamation-triangle mr-1"></i>
                              如遇安全提示，请在系统偏好设置中允许运行
                            </p>
                          </div>
                        </div>

                        {/* Linux */}
                        <div className="bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6">
                          <h4 className="font-bold text-lg mb-4 flex items-center">
                            <i className="fab fa-linux mr-2 text-blue-600"></i>
                            Linux
                          </h4>
                          <div className="space-y-3 text-sm">
                            <p>
                              1. 下载{" "}
                              <code className="bg-white px-2 py-1 rounded">
                                app-*-linux-x64.7z
                              </code>
                            </p>
                            <p>2. 解压后添加执行权限:</p>
                            <pre className="p-3 text-xs">
                              <code>
                                chmod +x app-*-linux-x64 && ./app-*-linux-x64
                              </code>
                            </pre>
                          </div>
                        </div>
                      </div>

                      {/* Security Note */}
                      <div className="mt-8 bg-amber-50 border border-amber-200 rounded-lg p-6">
                        <h4 className="font-bold text-amber-800 mb-3 flex items-center">
                          <i className="fas fa-shield-alt mr-2"></i>
                          安全说明
                        </h4>
                        <div className="text-amber-700 space-y-2 text-sm">
                          <p>• 所有构建产物都经过密码加密的 7z 压缩包保护</p>
                          <p>• 解压密码请联系管理员获取</p>
                          <p>• 请确保从官方渠道下载，避免安全风险</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {activeTab === "tech" && (
                <div className="bg-white rounded-xl shadow-lg p-8">
                  <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i className="fas fa-cogs mr-3 text-purple-500"></i>
                    技术栈
                  </h2>
                  <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    {[
                      {
                        name: "Bun",
                        icon: "fas fa-bolt",
                        color: "bg-yellow-500",
                      },
                      {
                        name: "ElysiaJS",
                        icon: "fas fa-server",
                        color: "bg-blue-500",
                      },
                      {
                        name: "Drizzle ORM",
                        icon: "fas fa-database",
                        color: "bg-green-500",
                      },
                      {
                        name: "PostgreSQL",
                        icon: "fas fa-elephant",
                        color: "bg-blue-600",
                      },
                      {
                        name: "DDD + CQRS",
                        icon: "fas fa-sitemap",
                        color: "bg-purple-500",
                      },
                      {
                        name: "GitHub Actions",
                        icon: "fab fa-github",
                        color: "bg-gray-800",
                      },
                    ].map((tech, index) => (
                      <div
                        key={index}
                        className="text-center p-4 rounded-lg border border-gray-200 card-hover"
                      >
                        <div
                          className={`w-12 h-12 ${tech.color} rounded-full flex items-center justify-center mx-auto mb-3`}
                        >
                          <i className={`${tech.icon} text-white text-xl`}></i>
                        </div>
                        <h3 className="font-semibold text-gray-800">
                          {tech.name}
                        </h3>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </main>
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
